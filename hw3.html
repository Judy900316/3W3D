<!DOCTYPE html>

<html>

  <head>
    <div id="info">hw3</div>
    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
    <script>
      //展示畫
      var camera, scene, renderer;

      init();
      animate();

      function init() {

        scene = new THREE.Scene();

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x888888);
        document.body.appendChild(renderer.domElement);

        camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.z = 500; // camera at (0,0,500)
        let controls = new THREE.OrbitControls(camera, renderer.domElement);

        ////////////////////////////////////////////////////////
        var gridXZ = new THREE.GridHelper(400, 40, 'red', 'white');
        scene.add(gridXZ);

        var wall = new THREE.Mesh(new THREE.BoxGeometry(120, 80, 10), new THREE.MeshPhongMaterial());
        wall.position.set(0, 40, -5);
        //scene.add(wall);

        const spotLight = new THREE.SpotLight(0xffffff, 1, 0, Math.PI / 6, 0.5);
        spotLight.position.set(0, 80, 80);
        scene.add(spotLight);

        const spotLightHelper = new THREE.SpotLightHelper(spotLight);
        //scene.add(spotLightHelper);


        let loader = new THREE.TextureLoader();
        let capMap = loader.load('https://i.imgur.com/zg53AwI.jpg');
        var painting = new THREE.Mesh(new THREE.PlaneGeometry(35, 35), new THREE.MeshBasicMaterial({
          map: capMap
        }));
        painting.position.y = 40;
        scene.add(wall, painting);
        // frame ...
        let frameMap = loader.load('https://i.imgur.com/Je86MDa.png');
        var frame = new THREE.Mesh(new THREE.PlaneGeometry(55, 55), new THREE.MeshBasicMaterial({
          map: frameMap,
          transparent: true
        }));
        frame.position.y = 40;
        scene.add(frame)

        spotLight.target = painting;

        var lampGroup = new THREE.Group();
        var lamp = new THREE.Mesh(new THREE.CylinderGeometry(5, 5, 20, 20), new THREE.MeshNormalMaterial());
        lamp.rotation.x = Math.PI / 2;
        lamp.position.set(0, 0, 10);
        lampGroup.add(lamp, new THREE.AxesHelper(60));
        scene.add(lampGroup);
        lampGroup.position.copy(spotLight.position);
        lampGroup.lookAt(painting.position);

        ///////////////////////椅子////////////////////////////////
        const pointLight1 = new THREE.PointLight(0xffffff, 3);
        pointLight1.position.set(0, 150, 0);
        scene.add(pointLight1);

        const sphereSize = 1;
        const pointLightHelper1 = new THREE.PointLightHelper(pointLight1, sphereSize);
        scene.add(pointLightHelper1);

        var chair = buildChair();
        var chair1 = chair.clone();
        chair1.position.set(0, 0, 90);
        var chair2 = chair.clone();
        chair2.position.set(-50, 0, -70);
        chair2.rotation.y = Math.PI / 2;
        scene.add(chair1, chair2);

        //scene.add(chair);
      }

      ///////////////////////椅子///////////////////////////////
      function buildChair() {
        var group = new THREE.Group();
        var woodTex = new THREE.TextureLoader().load("https://i.imgur.com/DrvlmNW.jpg?1");
        var mat = new THREE.MeshLambertMaterial({
          map: woodTex
        });
        var boxTop = new THREE.Mesh(new THREE.BoxGeometry(60, 10, 30), mat);
        var boxLeg1 = new THREE.Mesh(new THREE.BoxGeometry(10, 30, 30), mat);
        var boxLeg2 = new THREE.Mesh(new THREE.BoxGeometry(10, 30, 30), mat);
        boxTop.position.set(0, 25, 0);
        boxLeg1.position.set(-25, 15, 0);
        boxLeg2.position.set(25, 15, 0);
        group.add(boxTop, boxLeg1, boxLeg2);
        return group;
      }

      ///////////////////////////////////////////////////
      //四面牆
      const geometry = new THREE.BoxGeometry(400, 120, 2);
      const material = new THREE.MeshBasicMaterial({
        color: 0x000000
      });
      const cube = new THREE.Mesh(geometry, material);
      //面對畫 前後牆面
      var wallBefore = cube.clone();
      var wallAfter = cube.clone();
      wallBefore.position.set(0, 60, 200);
      scene.add(wallBefore);
      wallAfter.position.set(0, 60, -200);
      scene.add(wallAfter);
      //面對畫 左右牆面
      const geometry1 = new THREE.BoxGeometry(2, 120, 400);
      const material1 = new THREE.MeshBasicMaterial({
        color: 0x000000
      });
      const cube1 = new THREE.Mesh(geometry1, material1);
      var wallLeft = cube1.clone();
      var wallRight = cube1.clone();
      wallLeft.position.set(-200, 60, 0);
      scene.add(wallLeft);
      wallRight.position.set(200, 60, 0);
      scene.add(wallRight);
      //隔間牆
      const geometry2 = new THREE.BoxGeometry(5, 80, 190);
      const material2 = new THREE.MeshBasicMaterial({
        color: 0x000000
      });
      const cube2 = new THREE.Mesh(geometry2, material2);
      var wallLeft = cube2.clone();
      wallLeft.position.set(70, 40, 100);
      scene.add(wallLeft);

      function animate() {

        requestAnimationFrame(animate);
        renderer.render(scene, camera);

      }
      
    </script>
  </head>

  <body>

  </body>

</html>
